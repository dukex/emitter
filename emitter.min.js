(function(b){function a(){var d={};function c(){}var e=function(j,i,k,g,h){var f=function(){if(h){j.off(i,k)}return k.apply(g,arguments)};f.callback=k;return f};c.prototype.on=function(h,i,f,g){if(!d[h]){d[h]=[]}d[h].push(e(this,h,i,f,g));return this};c.prototype.off=function(j,k){var f=[],g=0,i,h;if(!k){return delete (d[j])}h=this.listeners(j);i=h.length;for(;g<i;g++){if(k===h[g].callback){continue}f.push(h[g])}if(f.length===0){return delete (d[j])}else{d[j]=f}};c.prototype.listeners=function(f){return(d[f]||[]).slice(0)};c.prototype.once=function(g,h,f){this.on(g,h,f,true)};c.prototype.emit=function(){var f=Array.prototype.slice.apply(arguments),h=f.shift(),g=this.listeners(h),i;while(g.length){i=g.shift();i.apply(undefined,f)}};return new c()}b.create=a})(typeof(exports)==="undefined"?this.Emitter={}:exports);